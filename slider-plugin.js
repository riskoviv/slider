(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=jQuery;var s,i,n,a,o,l,r,u=e.n(t),h=function(e,t,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(e):i?i.value:t.get(e)},c=function(e,t,s,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,s):n?n.value=s:t.set(e,s),s};class p{static pluginWarn(e){h(p,s,"m",n).call(p,e,"slider-plugin")}static modelWarn(e){h(p,s,"m",n).call(p,e,"Model")}static emitError(e){const t={type:"error",message:`${e.name}: ${e.message}`,module:"EventEmitter",timestamp:Date.now()};h(p,s,"f",i).push(t),h(p,s,"m",r).call(p,t)}static printLogs(){h(p,s,"f",i).forEach((e=>{if("warn"===e.type)h(p,s,"m",l).call(p,e);else h(p,s,"m",r).call(p,e)}))}static deleteLogs(){c(p,s,[],"f",i),console.info("%cAll Logger's logs has been deleted","background-color: #25d2; color: #25f; border-radius: 3px; border: 1px solid #25d; padding: 3px;")}}s=p,n=function(e,t){const n={type:"warn",message:e,module:t,timestamp:Date.now()};h(p,s,"f",i).push(n),h(p,s,"m",l).call(p,n)},a=function(e){return e<10?`0${e}`:String(e)},o=function(e){const t=new Date(e),i=t.getHours(),n=t.getMinutes(),o=t.getSeconds();return`${i}:${h(p,s,"m",a).call(p,n)}:${h(p,s,"m",a).call(p,o)}.${t.getMilliseconds()}`},l=function(e){e.module,h(p,s,"m",o).call(p,e.timestamp),e.message},r=function(e){e.module,h(p,s,"m",o).call(p,e.timestamp),e.message},i={value:[]},Object.defineProperty(window,"Logger",{value:p});const d=p;class v{constructor(){this.valueHandlers={},this.stateHandlers={},this.viewHandlers={}}on(e){return this.eventsSwitch({options:e,type:"on"}),this}eventsSwitch({options:e,type:t}){switch(e.event){case"value1Changed":case"value2Changed":case"minValueChanged":case"maxValueChanged":case"stepSizeChanged":switch(t){case"on":this.valueOn(e);break;case"emit":this.valueEmit(e);break;case"subscribe":this.valueSubscribe(e)}break;case"isVerticalChanged":case"isIntervalChanged":case"showProgressChanged":case"showTipChanged":case"showScaleChanged":switch(t){case"on":this.stateOn(e);break;case"emit":this.stateEmit(e);break;case"subscribe":this.stateSubscribe(e)}break;case"sliderPointerDown":switch(t){case"on":this.sliderPointerDownOn(e);break;case"emit":this.sliderPointerDownEmit(e)}break;case"scaleValueSelect":switch(t){case"on":this.scaleValueSelectOn(e);break;case"emit":this.scaleValueSelectEmit(e)}}}valueOn({event:e,handler:t,subscriber:s}){void 0===this.valueHandlers[e]&&(this.valueHandlers[e]=new Map),this.valueHandlers[e]?.set(s,t)}stateOn({event:e,handler:t,subscriber:s}){void 0===this.stateHandlers[e]&&(this.stateHandlers[e]=new Map),this.stateHandlers[e]?.set(s,t)}sliderPointerDownOn({event:e,handler:t}){void 0===this.viewHandlers[e]&&(this.viewHandlers[e]=new Map),this.viewHandlers[e]?.set(void 0,t)}scaleValueSelectOn({event:e,handler:t}){void 0===this.viewHandlers[e]&&(this.viewHandlers[e]=new Map),this.viewHandlers[e]?.set(void 0,t)}off(e){const t=[this.valueHandlers,this.stateHandlers];let s=!1;return t.forEach((t=>{const i=Object.values(t);for(let t=0;n=t,!1===s&&n<i.length;t+=1){const n=i[t];n.has(e)&&(s=n.delete(e))}var n})),s}emit(e){this.eventsSwitch({options:e,type:"emit"})}valueEmit({event:e,value:t,options:s}){const i=this.valueHandlers[e];if(void 0===i)return void v.throwEmitError(e,t);const n=[...i.values()];void 0===s?n.forEach((e=>{e(t)})):n.forEach((e=>{e(t,s)}))}stateEmit({event:e,value:t,options:s}){const i=this.stateHandlers[e];if(void 0===i)return void v.throwEmitError(e,t);const n=[...i.values()];void 0===s?n.forEach((e=>{e(t)})):n.forEach((e=>{e(t,s)}))}sliderPointerDownEmit({event:e,value:t}){const s=this.viewHandlers[e];void 0!==s?[...s.values()].forEach((e=>{e(t)})):v.throwEmitError(e,t)}scaleValueSelectEmit({event:e,value:t}){const s=this.viewHandlers[e];void 0!==s?[...s.values()].forEach((e=>{e(t)})):v.throwEmitError(e,t)}static throwEmitError(e,t){const s=new Error;s.name="EmitError";const i="object"==typeof t&&null!==t?`{ ${Object.entries(t).map((([e,t])=>`${e}: ${t}`)).join(", ")} }`:t;s.message=`${e} event is not registered. value = ${i}`,d.emitError(s)}valueSubscribe({event:e,subscriber:t}){const s=e=>{const t=e,s=new InputEvent("input");Object.defineProperty(s,"isSubscribeSet",{value:!0});return e=>{t.value=String(e),t.dispatchEvent(s)}};t instanceof HTMLInputElement&&"number"===t.type?this.valueOn({event:e,handler:s(t),subscriber:t}):t instanceof Function&&this.valueOn({event:e,handler:t,subscriber:t})}stateSubscribe({event:e,subscriber:t}){const s=e=>{const t=e,s=new InputEvent("change");Object.defineProperty(s,"isSubscribeSet",{value:!0});return e=>{t.checked=e,t.dispatchEvent(s)}};t instanceof HTMLInputElement&&"checkbox"===t.type?this.stateOn({event:e,handler:s(t),subscriber:t}):t instanceof Function&&this.stateOn({event:e,handler:t,subscriber:t})}}const m=v,b={stepSize:10,minValue:-100,maxValue:100,value1:-50,value2:50,isVertical:!1,isInterval:!1,showTip:!1,showScale:!1,showProgressBar:!1},V=e=>{const t=[];for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.push(s);return t},w=e=>{const t=V(e),s=Object.values(e);return t.map(((e,t)=>[e,s[t]]))},g=e=>{const t="number"==typeof e?String(e):e;return t.includes(".")?t.split(".")[1].length:0};Symbol("test");const f=class extends m{constructor(e){super(),this.allowedValues=[],this.allowedValuesCount=0,this.viewValues={positions:{1:NaN,2:NaN},stepInPercents:NaN,penultimatePosition:NaN},this.publicValueMethods={setValue1:this.setValue1.bind(this),setValue2:this.setValue2.bind(this),setStepSize:this.setStepSize.bind(this),setMinValue:this.setMinValue.bind(this),setMaxValue:this.setMaxValue.bind(this)},this.publicStateMethods={setVerticalState:this.setVerticalState.bind(this),setInterval:this.setInterval.bind(this),setShowProgress:this.setShowProgress.bind(this),setShowTip:this.setShowTip.bind(this),setShowScale:this.setShowScale.bind(this)},this.publicDataMethods={getOptions:this.getOptions.bind(this),subscribe:this.subscribe.bind(this),unsubscribe:this.unsubscribe.bind(this)},this.options={...e},this.fractionalPrecision=this.identifyMaxFractionalPrecision(),this.updateAllowedValues(),this.fixValues()}createAllowedValuesArray(){const e=[],{minValue:t,maxValue:s,stepSize:i}=this.options;for(let n=t;n<=s;n+=i)e.push(this.fixValueToPrecision(n));return e.at(-1)!==s&&e.push(s),e}getIndexByValueNumber(e){const t=this.options[`value${e}`];return this.getIndexByValue(t)}getIndexByValue(e){return this.allowedValues.indexOf(e)}getValueByIndex(e){return e>=this.allowedValuesCount-1?this.options.maxValue:e<=0?this.options.minValue:this.allowedValues[e]}getPenultimateValue(){return this.allowedValues.slice(-2)[0]}getAllowedValuesCount(){return this.allowedValues.length}setVerticalState(e){const t="boolean"==typeof e,s=this.options.isVertical===e;t&&!s&&(this.options.isVertical=e,this.emit({event:"isVerticalChanged",value:e}))}setInterval(e){const t="boolean"==typeof e,s=this.options.isInterval===e;if(!(t&&!s))return;this.options.isInterval=e;const{value1Fixed:i,value2Fixed:n}=this.fixValues(),a=this.options.isInterval&&(n||Number.isNaN(this.viewValues.positions[2]));this.emit({event:"isIntervalChanged",value:e,options:{checkTipsOverlap:!(i||a)}}),i&&this.emit({event:"value1Changed",value:this.options.value1,options:{changeTipValue:!0,checkTipsOverlap:i&&!a}}),a&&this.emit({event:"value2Changed",value:this.options.value2,options:{changeTipValue:!1,checkTipsOverlap:!0}})}setShowProgress(e){const t="boolean"==typeof e,s=this.options.showProgressBar===e;t&&!s&&(this.options.showProgressBar=e,this.emit({event:"showProgressChanged",value:e}))}setShowTip(e){const t="boolean"==typeof e,s=this.options.showTip===e;t&&!s&&(this.options.showTip=e,this.emit({event:"showTipChanged",value:e}))}setShowScale(e){const t="boolean"==typeof e,s=this.options.showScale===e;t&&!s&&(this.options.showScale=e,this.emit({event:"showScaleChanged",value:e}))}setStepSize(e){if("number"!=typeof e)return;const t=Number.isFinite(e),s=this.options.stepSize===e,i=e>this.options.maxValue-this.options.minValue;t&&!s&&!i&&!(0===e)&&(this.options.stepSize=e<0?-e:e,this.updateValues("stepSizeChanged",this.options.stepSize))}setMinValue(e){if("number"!=typeof e)return;const t=Number.isFinite(e),s=this.options.minValue===e,i=e>this.options.maxValue-this.options.stepSize;t&&!s&&!i&&(this.options.minValue=e,this.updateValues("minValueChanged",e,!0))}setMaxValue(e){if("number"!=typeof e)return;const t=Number.isFinite(e),s=e===this.options.maxValue,i=e<this.options.minValue+this.options.stepSize;t&&!s&&!i&&(this.options.maxValue=e,this.updateValues("maxValueChanged",e,!0))}setValue1(e){this.setValue(1,e)}setValue2(e){this.setValue(2,e)}setValue(e,t,s=!1){if("number"!=typeof t)return;if(!(Number.isFinite(t)&&[1,2].includes(e)))return;const i=`value${e}`;this.options[i]===t||(this.options[i]=s?t:this.fixValue(e,t,!0),this.emit({event:`${i}Changed`,value:this.options[i],options:{changeTipValue:!0,onlySaveValue:s,checkTipsOverlap:this.options.isInterval}}))}fixValueToPrecision(e){const t=Number.prototype.toFixed.call(e,this.fractionalPrecision);return Number.parseFloat(t)}getOptions(){return{...this.options}}subscribe(e){const{subscriber:t}=e;this.unsubscribe(t),this.eventsSwitch({options:e,type:"subscribe"}),t instanceof HTMLInputElement?Object.defineProperty(t,"unsubscribe",{value:this.unsubscribe.bind(this,t),writable:!0,configurable:!0}):t instanceof Function&&(t.unsubscribe=this.unsubscribe.bind(this,t))}unsubscribe(e){return(e instanceof HTMLInputElement||e instanceof Function)&&(delete e.unsubscribe,this.off(e))}updateAllowedValues(){this.allowedValues=this.createAllowedValuesArray(),this.allowedValuesCount=this.getAllowedValuesCount()}updateValues(e,t,s=!1){this.fractionalPrecision=this.identifyMaxFractionalPrecision(),this.updateAllowedValues(),this.emit({event:e,value:t});const{value1Fixed:i,value2Fixed:n}=this.fixValues(),a=s||i,o=this.options.isInterval&&(s||n);a&&this.emit({event:"value1Changed",value:this.options.value1,options:{changeTipValue:!0,checkTipsOverlap:a&&!o}}),o&&this.emit({event:"value2Changed",value:this.options.value2,options:{changeTipValue:!0,checkTipsOverlap:!0}})}isValueAllowed(e){return this.allowedValues.includes(e)}getSecondValue(){return this.allowedValues[1]}fixValues(){const{value1:e,value2:t}=this.options;if(this.isValueAllowed(this.options.value1)||(this.options.value1=this.fixValue(1,this.options.value1)),this.options.isInterval)if(this.isValueAllowed(this.options.value2)||(this.options.value2=this.fixValue(2,this.options.value2)),this.options.value1===this.options.value2){const e=`Warning: difference between value1 and value2 is less than stepSize (${this.options.stepSize}) in plugin options and leads to equality of value1 and value2.`,t="\nPlease check values that you passed to plugin options.";if(this.options.value1===this.options.maxValue)this.options.value1=this.getPenultimateValue(),d.modelWarn(`${e} Also value1 was too close to maxValue, so value1 is now set to previous closest allowed value.${t}`);else if(this.options.value2===this.options.minValue)this.options.value2=this.getSecondValue(),d.modelWarn(`${e} Also value2 was too close to minValue, so value2 is now set to next closest allowed value.${t}`);else{const s=this.getIndexByValueNumber(1);this.options.value2=this.getValueByIndex(s+1),d.modelWarn(`${e} value2 is now set to next closest allowed value.${t}`)}}else this.options.value2<this.options.value1&&([this.options.value1,this.options.value2]=[this.options.value2,this.options.value1],d.modelWarn("value1 & value2 were swapped"));return{value1Fixed:e!==this.options.value1,value2Fixed:t!==this.options.value2}}fixValue(e,t,s=!1){const i=[];let n=t;return(!s||!this.isValueAllowed(n))&&(n=this.findClosestAllowedValue(n),i.push("change to closest allowed value")),this.options.isInterval&&(1===e?n>=this.options.value2&&(n=this.options.value2===this.options.maxValue?this.getPenultimateValue():this.getValueByIndex(this.getIndexByValueNumber(2)-1),i.push("make it less than value2")):n<=this.options.value1&&(n=this.getValueByIndex(this.getIndexByValueNumber(1)+1),i.push("make it more than value1"))),g(n)!==this.fractionalPrecision&&(n=this.fixValueToPrecision(n),i.push("fix fractional precision")),n!==t&&d.modelWarn(`Note: value${e} (${t}) is changed to ${n} in order to ${i.join(" and to ")}.`),n}findClosestAllowedValue(e){const t=this.options.minValue,s=this.options.stepSize,i=Math.round((e-t)/s);return this.getValueByIndex(i)}identifyMaxFractionalPrecision(){const e=[this.options.stepSize,this.options.minValue,this.options.maxValue].map((e=>g(e)));return Math.max(...e)}};class S extends m{constructor(e={}){super(),this.$controlContainer=u()('<div class="slider__control-container"></div>'),this.pointerDown=e=>{if(0!==e.button)return;e.preventDefault(),this.controlContainerElem.setPointerCapture(e.pointerId);const{target:t,offsetX:s,offsetY:i}=e;t instanceof HTMLDivElement&&this.emit({event:"sliderPointerDown",value:{target:t,offsetX:s,offsetY:i}})},this.$elem=this.render(e),[this.controlContainerElem]=this.$controlContainer,this.bindEventListeners()}toggleVertical(e){this.$elem.toggleClass("slider_vertical",e)}toggleInterval(e){this.$elem.toggleClass("slider_interval",e)}toggleProgressBar(e){this.$elem.toggleClass("slider_show-progress",e)}setPosition(e,t){this.$controlContainer.css(`--value-${e}-position`,`${t}%`)}setThumbThickness(e){this.$controlContainer.css("--thumb-thickness",`${e}%`)}render(e){const{isVertical:t=!1,isInterval:s=!1,showProgressBar:i=!1}=e,n=["slider",...[t?"slider_vertical":"",s?"slider_interval":"",i?"slider_show-progress":""]].join(" ").trim();return u()(`<div class="${n}"></div>`).append(this.$controlContainer)}bindEventListeners(){this.controlContainerElem.addEventListener("pointerdown",this.pointerDown),this.$controlContainer.on("contextmenu.controlContainer",S.preventContextMenu)}}S.preventContextMenu=()=>!1;const C=S;const T=class extends m{constructor(e,t=1){super(),this.viewType=e,this.elementNumber=t,this.$elem=this.render()}removeView(){this.$elem.remove()}render(){let e;return e="thumb"===this.viewType||"tip"===this.viewType?u()(`\n        <div\n          class="slider__${this.viewType} slider__${this.viewType}_${this.elementNumber}"\n          data-number="${this.elementNumber}"\n        ></div>\n      `):u()(`<div class="slider__${this.viewType}"></div>`),e}};const x=class extends T{constructor(){super("track")}};const E=class extends T{constructor(e=1){super("thumb",e)}};class y extends T{constructor(){super("scale"),this.scaleValueElements=[],this.scaleValueClick=e=>{const{target:t}=e;t instanceof HTMLSpanElement&&0===e.button&&this.emit({event:"scaleValueSelect",value:Number(t.textContent)})},this.bindClickListener()}insertScaleValueElements(){this.$elem.empty(),this.$elem.append(this.scaleValueElements)}optimizeValuesCount(e,t){const[s]=this.scaleValueElements,[i]=this.scaleValueElements.slice(-1);let n=s,a=n.position()[e],o=y.getElementEdgeBound(n,a,t);this.scaleValueElements.slice(1).forEach((l=>{const r=l.position()[e];if(r-5<=o){l===i&&n!==s?n.addClass("slider__scale-block_unnumbered"):l!==i&&l.addClass("slider__scale-block_unnumbered")}else n=l,a=r,o=y.getElementEdgeBound(l,r,t),l.removeClass("slider__scale-block_unnumbered")}))}static getElementEdgeBound(e,t,s){return t+e[0][s]}bindClickListener(){this.$elem[0].addEventListener("pointerdown",this.scaleValueClick)}}const P=y;const $=class extends T{constructor(e=1){super("tip",e),this.tipHiddenClass="slider__tip_hidden",3===e&&this.$elem.addClass(this.tipHiddenClass)}setValue(e){"number"==typeof e?Number.isFinite(e)&&this.$elem.text(e):this.$elem.text(e)}};const O=class{constructor(e,t){this.$pluginRootElem=e,this.model=t,this.subViews={track:new x,thumb1:new E},this.sizeDimension="offsetWidth",this.positionDimension="offsetLeft",this.positionAxis="left",this.offset="offsetX",this.fixValue=this.model.fixValueToPrecision.bind(this.model),this.tipHiddenClass="slider__tip_hidden",this.resizeObserverActive=!1,this.stateChangeHandlers=[{stateChangeEvent:"isVerticalChanged",stateChangeHandler:e=>{this.updateDimensionAndAxis(),this.view.toggleVertical(e);(this.options.showScale||this.isTwoTips())&&this.activateResizeObserver(),this.options.isInterval&&this.showJointOrSeparateTips()}},{stateChangeEvent:"isIntervalChanged",stateChangeHandler:(e,t={checkTipsOverlap:!1})=>{if(e)this.createSubView("thumb"),this.options.showTip&&(this.createSubView("tip",2),this.createSubView("tip",3),this.setTipValue({number:2,value:this.options.value2}),this.resizeObserverActive||this.activateResizeObserver());else{this.removeSubView("thumb2"),this.removeSubView("tip2"),this.removeSubView("tip3");!this.options.showScale&&this.resizeObserverActive&&this.deactivateResizeObserver()}t.checkTipsOverlap&&this.showJointOrSeparateTips(),this.view.toggleInterval(e)}},{stateChangeEvent:"showProgressChanged",stateChangeHandler:e=>{this.view.toggleProgressBar(e)}},{stateChangeEvent:"showTipChanged",stateChangeHandler:e=>{if(e)this.createSubView("tip",1),this.setTipValue({number:1,value:this.options.value1}),this.options.isInterval&&(this.createSubView("tip",2),this.createSubView("tip",3),this.setTipValue({number:2,value:this.options.value2}),this.setTipValue({number:3,value:`${this.options.value1} – ${this.options.value2}`}),this.showJointOrSeparateTips(),this.resizeObserverActive||this.activateResizeObserver());else{this.removeSubView("tip1"),this.options.isInterval&&(this.removeSubView("tip2"),this.removeSubView("tip3"));!this.options.showScale&&this.resizeObserverActive&&this.deactivateResizeObserver()}}},{stateChangeEvent:"showScaleChanged",stateChangeHandler:e=>{if(e)this.createSubView("scale"),this.updateScale();else{this.removeSubView("scale");this.resizeObserverActive&&!this.isTwoTips()&&this.deactivateResizeObserver()}}}],this.numericBoundsChangeHandler={boundsChangeEvents:["stepSizeChanged","minValueChanged","maxValueChanged"],boundsChangeHandler:()=>{this.defineViewValues(),this.view.setThumbThickness(this.model.viewValues.stepInPercents),this.options.showScale&&this.updateScale()}},this.valueChangeHandler={valueChangeEvents:["value1Changed","value2Changed"],valueNumbers:[1,2],makeValueChangeHandler:e=>(t,s={})=>{const{changeTipValue:i=!0,onlySaveValue:n=!1,checkTipsOverlap:a=!0}=s;if(this.options.showTip&&i&&this.setTipValue({number:e,value:t}),!n){const s=this.getPositionByValue(t);this.setPosition(e,s)}this.options.showTip&&!1!==a&&this.showJointOrSeparateTips()}},this.thumbChecks={isThumbKeepsDistance:e=>{const{thumbNumber:t}=this.currentThumbData;if(1===t){return e<this.model.viewValues.positions[2]}return e>this.model.viewValues.positions[1]},fixIfOutOfRange:e=>e<0?0:e>100?100:e},this.viewEventHandlers={sliderPointerDown:e=>{const{target:t}=e;if(t.classList.contains("slider__thumb")){const e=Number(t.dataset.number);(1===e||2===e)&&this.saveCurrentThumbData(e)}else if(t===this.view.controlContainerElem){const t=this.pixelsToPercentsOfSliderLength(e[this.offset]),s=this.options.isInterval?this.findClosestThumbByPosition(t):1;this.saveCurrentThumbData(s);const i=this.findClosestAllowedPosition(t),n=this.getValueByPosition(i);if(i!==this.currentThumbData.currentPosition&&n!==this.currentThumbData.currentValue){(!this.options.isInterval||this.thumbChecks.isThumbKeepsDistance(i))&&this.setPositionAndCurrentValue({number:s,position:i,value:n})}}this.view.controlContainerElem.addEventListener("pointermove",this.viewEventHandlers.sliderPointerMove),this.view.controlContainerElem.addEventListener("pointerup",this.viewEventHandlers.sliderPointerUp,{once:!0})},sliderPointerMove:e=>{const t=this.findClosestAllowedPosition(this.pixelsToPercentsOfSliderLength(e[this.offset])),{thumbNumber:s}=this.currentThumbData,i=!this.options.isInterval||this.thumbChecks.isThumbKeepsDistance(t);if(t!==this.currentThumbData.currentPosition&&i){const e=this.getValueByPosition(t);this.setPositionAndCurrentValue({number:s,position:t,value:e})}},sliderPointerUp:()=>{this.view.controlContainerElem.removeEventListener("pointermove",this.viewEventHandlers.sliderPointerMove)},scaleValueSelect:e=>{const t=this.getPositionByValue(e);let s=1;this.options.isInterval&&(s=this.findClosestThumbByValue(e)),this.options[`value${s}`]!==e&&this.setPositionAndCurrentValue({number:s,position:t,value:e})}},this.currentThumbData={thumbNumber:1,currentPosition:NaN,currentValue:NaN},this.options=this.model.options,this.updateDimensionAndAxis(),this.defineViewValues(),this.view=this.createView(),this.createInitialSubViews(),this.insertSliderToContainer(),this.bindModelEventListeners(),this.checkThatScaleAndResizeObserverIsNeeded(),this.passInitialValuesToSubViews(this.options.value1,this.options.value2)}isTwoTips(){return this.options.showTip&&this.options.isInterval}checkThatScaleAndResizeObserverIsNeeded(){this.options.showScale&&this.updateScale();this.isTwoTips()&&!this.resizeObserverActive&&this.activateResizeObserver()}createView(){const e=new C({isVertical:this.options.isVertical,isInterval:this.options.isInterval,showProgressBar:this.options.showProgressBar});return e.setThumbThickness(this.model.viewValues.stepInPercents),e.on({event:"sliderPointerDown",handler:this.viewEventHandlers.sliderPointerDown}),e}bindModelEventListeners(){this.stateChangeHandlers.forEach((({stateChangeEvent:e,stateChangeHandler:t})=>{this.model.on({event:e,handler:t})}));const{boundsChangeEvents:e,boundsChangeHandler:t}=this.numericBoundsChangeHandler;e.forEach((e=>{this.model.on({event:e,handler:t})}));const{valueChangeEvents:s,valueNumbers:i,makeValueChangeHandler:n}=this.valueChangeHandler;s.forEach(((e,t)=>{this.model.on({event:e,handler:n(i[t])})}))}activateResizeObserver(){void 0===this.sliderResizeObserver?this.sliderResizeObserver=new ResizeObserver((()=>{void 0!==this.subViews.scale&&this.subViews.scale.optimizeValuesCount(this.positionAxis,this.sizeDimension),this.options.showTip&&this.showJointOrSeparateTips()})):this.sliderResizeObserver.unobserve(this.view.$elem[0]),this.sliderResizeObserver.observe(this.view.$elem[0]),this.resizeObserverActive=!0}deactivateResizeObserver(){this.sliderResizeObserver?.disconnect(),this.resizeObserverActive=!1}updateDimensionAndAxis(){this.options.isVertical?(this.sizeDimension="offsetHeight",this.positionDimension="offsetTop",this.positionAxis="top",this.offset="offsetY"):(this.sizeDimension="offsetWidth",this.positionDimension="offsetLeft",this.positionAxis="left",this.offset="offsetX")}passInitialValuesToSubViews(e,t){const s=this.getPositionByValue(e),i=this.getPositionByValue(t);this.setPosition(1,s),this.options.showTip&&this.setTipValue({number:1,value:e}),this.options.isInterval&&(this.setPosition(2,i),this.options.showTip&&this.setTipValue({number:2,value:t}),this.showJointOrSeparateTips())}appendSubViewElementToControlContainer(e){const t=this.subViews[e];void 0!==t&&this.view.$controlContainer.append(t.$elem)}createInitialSubViews(){this.appendSubViewElementToControlContainer("track"),this.appendSubViewElementToControlContainer("thumb1"),this.options.showTip&&this.createSubView("tip",1),this.options.isInterval&&(this.createSubView("thumb"),this.options.showTip&&(this.createSubView("tip",2),this.createSubView("tip",3))),this.options.showScale&&this.createSubView("scale")}createSubView(e,t=1){switch(e){case"tip":this.subViews[`tip${t}`]=new $(t),this.appendSubViewElementToControlContainer(`tip${t}`);break;case"thumb":this.subViews.thumb2=new E(2),this.appendSubViewElementToControlContainer("thumb2");break;default:{this.subViews.scale=new P;const e=this.renderSubView("scale");null!==e&&this.view.$elem.append(e),this.subViews.scale.on({event:"scaleValueSelect",handler:this.viewEventHandlers.scaleValueSelect})}}}updateScale(){const{scale:e}=this.subViews;void 0!==e&&(this.createScaleValuesElements(e),e.insertScaleValueElements(),this.resizeObserverActive?e.optimizeValuesCount(this.positionAxis,this.sizeDimension):this.activateResizeObserver())}createScaleValuesElements(e){const t=e,s=this.$pluginRootElem[0][this.sizeDimension],{allowedValuesCount:i}=this.model,n=Math.round(i/s*5),a=i-1,o=[0,1].includes(n);t.scaleValueElements=o?this.getScaleValueElements(a):this.getScaleValueElements(a,n)}getScaleValueElements(e,t=1){const s=[];for(let i=0;i<=e;i+=t){const e=this.model.getValueByIndex(i),t=this.getPositionByIndex(i);s.push(this.makeNewScaleValueElement(e,t))}return s.at(-1)?.text().trim()!==String(this.options.maxValue)&&s.push(this.makeNewScaleValueElement(this.options.maxValue,100)),s}makeNewScaleValueElement(e,t){return u()(`<div class="slider__scale-block" style="--scale-block-position: ${t}%">\n      <span class="slider__scale-text">${this.fixValue(e)}</span>\n    </div>`)}removeSubView(e){const t=this.subViews[e];void 0!==t&&(t.removeView(),delete this.subViews[e])}renderSubView(e){const t=this.subViews[e];return void 0!==t?t.$elem:null}insertSliderToContainer(){this.$pluginRootElem.append(this.view.$elem)}getPositionByValue(e){const t=this.model.getIndexByValue(e);return this.thumbChecks.fixIfOutOfRange(this.model.viewValues.stepInPercents*t)}getIndexByPosition(e){return Math.round(e/this.model.viewValues.stepInPercents)}getPositionByIndex(e){const t=this.model.viewValues.stepInPercents*e;return t>100?100:t}getValueByPosition(e){if(100===e)return this.options.maxValue;const t=this.getIndexByPosition(e);return this.fixValue(this.model.getValueByIndex(t))}saveCurrentThumbData(e){this.currentThumbData={thumbNumber:e,currentPosition:this.model.viewValues.positions[e],currentValue:this.options[`value${e}`]}}getPenultimatePosition(){return this.model.viewValues.stepInPercents*(this.model.allowedValuesCount-2)}pixelsToPercentsOfSliderLength(e){const t=this.view.$controlContainer[0][this.sizeDimension];return this.thumbChecks.fixIfOutOfRange(e/t*100)}findClosestAllowedPosition(e){if(e>this.model.viewValues.penultimatePosition){const t=(100-this.model.viewValues.penultimatePosition)/2;return e<this.model.viewValues.penultimatePosition+t?this.model.viewValues.penultimatePosition:100}const t=this.model.viewValues.stepInPercents;return Math.round(e/t)*t}findClosestThumbByValue(e){const{value1:t,value2:s}=this.options;return Math.abs(e-t)>Math.abs(e-s)?2:1}findClosestThumbByPosition(e){const{1:t,2:s}=this.model.viewValues.positions;return Math.abs(t-e)<=Math.abs(s-e)?1:2}areTipsOverlap(){const{tip1:e}=this.subViews,{tip2:t}=this.subViews;if(void 0!==e&&void 0!==t){const[s]=e.$elem,[i]=t.$elem;return s[this.positionDimension]+s[this.sizeDimension]>=i[this.positionDimension]}return!1}setPositionAndCurrentValue({number:e,position:t,value:s}){this.currentThumbData.thumbNumber=e,this.setPosition(e,t),this.saveCurrentValue(e,s)}setPosition(e,t){this.currentThumbData.currentPosition=t,this.view.setPosition(e,t),this.model.viewValues.positions[e]=t}saveCurrentValue(e,t){this.currentThumbData.currentValue=t,this.model.setValue(e,t,!0)}setTipValue({number:e,value:t}){const s=`tip${e}`,i=this.subViews[s];void 0!==i&&i.setValue(t)}showJointOrSeparateTips(){if(this.isTwoTips())this.areTipsOverlap()?this.showJointTip():this.showSeparateTips();else if(this.options.showTip){const{tip1:e}=this.subViews;void 0!==e&&e.$elem.removeClass(this.tipHiddenClass)}}showJointTip(){const{tip1:e,tip2:t,tip3:s}=this.subViews;void 0!==e&&void 0!==t&&void 0!==s&&(s.setValue(`${this.options.value1} – ${this.options.value2}`),s.$elem.removeClass(this.tipHiddenClass),e.$elem.addClass(this.tipHiddenClass),t.$elem.addClass(this.tipHiddenClass))}showSeparateTips(){const{tip1:e,tip2:t,tip3:s}=this.subViews;void 0!==e&&void 0!==t&&void 0!==s&&(s.$elem.addClass(this.tipHiddenClass),e.$elem.removeClass(this.tipHiddenClass),t.$elem.removeClass(this.tipHiddenClass))}defineViewValues(){const{minValue:e,maxValue:t,stepSize:s}=this.options,i=t-e;this.model.viewValues.stepInPercents=s/i*100,this.model.viewValues.penultimatePosition=this.getPenultimatePosition()}},z=e=>{if("object"!=typeof e||null===e||Object.prototype.hasOwnProperty.call(e,"length"))return d.pluginWarn("Warning: options object passed to plugin has wrong type (must be an object)"),null;if(0===Object.keys(e).length)return{};const t={...e};return w(e).forEach((e=>{const[s,i]=e;void 0===b[s]?(d.pluginWarn(`Warning: option named ${s} is irrelevant`),delete t[s]):typeof i!=typeof b[s]?(d.pluginWarn(`Warning: option named ${s} has wrong value type (${typeof i}), but must be of type ${typeof b[s]}`),delete t[s]):"number"==typeof b[s]&&(Number.isFinite(i)||(d.pluginWarn(`Warning: option named ${s} must be a number > 0, but value provided in options is not correct number`),delete t[s]))})),t};u().fn.sliderPlugin=function(e={}){var t;(t=this).not(":empty").length>0&&(t.empty(),d.pluginWarn("Warning: The element where you intended to initialize the plugin has contained something. It was cleared and now has only the new slider-plugin instance."));const s=(e=>{const t={...e},s="\nPlease check values that you passed to plugin options";t.stepSize<0&&(t.stepSize=-t.stepSize,d.pluginWarn(`Warning: stepSize < 0 in plugin options. stepSize is set to absolute value of it (${t.stepSize}).${s}`)),0===t.stepSize&&(t.stepSize=10,d.pluginWarn(`Warning: stepSize is 0 in plugin options. stepSize is reset to default value (10).${s}`)),t.minValue>t.maxValue?([t.minValue,t.maxValue]=[t.maxValue,t.minValue],d.pluginWarn(`Warning: minValue is greater than maxValue in plugin options. Values are now swapped.${s}.`)):t.minValue===t.maxValue&&(t.maxValue+=t.stepSize,d.pluginWarn(`Warning: maxValue is equal to minValue in plugin options. maxValue is now increased by stepSize (${t.stepSize}).${s}.`)),t.value1<t.minValue?(t.value1=t.minValue,d.pluginWarn(`Warning: value1 < minValue in plugin options. value1 is now set to minValue.${s}.`)):t.value1>t.maxValue&&(t.isInterval?(t.value1=t.maxValue-t.stepSize,d.pluginWarn(`Warning: value1 > maxValue in plugin options. value1 is now set to maxValue - stepSize.${s}.`)):(t.value1=t.maxValue,d.pluginWarn(`Warning: value1 > maxValue in plugin options. value1 is now set to maxValue.${s}.`))),t.isInterval&&(t.value2<t.minValue?(t.value2=t.minValue+t.stepSize,d.pluginWarn(`Warning: value2 < minValue in plugin options. value2 is now set to minValue + stepSize.${s}.`)):t.value2>t.maxValue&&(t.value2=t.maxValue,d.pluginWarn(`Warning: value2 > maxValue in plugin options. value2 is now set to maxValue.${s}.`)),t.value1>t.value2&&([t.value1,t.value2]=[t.value2,t.value1],d.pluginWarn(`Warning: value1 > value2 in plugin options. Values are now swapped.${s}.`)));const i=t.maxValue-t.minValue;return t.stepSize>=i&&(d.pluginWarn(`Warning: stepSize (${t.stepSize}) must be less that slider range (${i}). stepSize is now reset to 1.${s}.`),t.stepSize=1),t})({...b,...z(e)}),i=new f(s),n=new O(this,i).view.$elem;({getOptions:n.getOptions,subscribe:n.subscribe,unsubscribe:n.unsubscribe}=i.publicDataMethods);n.destroySlider=()=>(delete n[0],n.length=0,[...[i.publicDataMethods,i.publicValueMethods,i.publicStateMethods].flatMap(V),"destroySlider"].forEach((e=>{delete n[e]})),Object.freeze(i.options),this.empty(),delete this[0].destroySlider,!!this.is(":empty")),Object.defineProperty(this[0],"destroySlider",{value:n.destroySlider,writable:!0,configurable:!0});return w(i.publicValueMethods).forEach((([e,t])=>{n[e]=(e=>{const t=t=>(e(t),n);return Object.defineProperty(t,"name",{value:e.name.substring(6)}),t})(t)})),w(i.publicStateMethods).forEach((([e,t])=>{n[e]=(e=>{const t=t=>(e(t),n);return Object.defineProperty(t,"name",{value:e.name.substring(6)}),t})(t)})),n}})();